{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/main/main.css' %}">
<style>
    /* 임시 CSS: 레이아웃 확인용 (실제 스타일은 main.css에서 관리) */
    .hero-section { text-align: center; padding: 40px 20px; background: #f8f9fa; margin-bottom: 30px; border-radius: 8px;}
    .recommendation-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; padding: 20px;}
    .post-card { border: 1px solid #dee2e6; padding: 15px; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .post-card h4 { color: #007bff; margin-top: 0; }
    .post-meta span { display: block; font-size: 0.9em; color: #6c757d; }
</style>
{% endblock %}

{% block content %}
    <section class="hero-section">
        {% if nickname %}
            <h2>안녕하세요, **{{ nickname }}**님!</h2>
            <p>회원님의 프로필 정보에 기반한 맞춤형 동아리/팀 모집 공고를 추천해 드립니다.</p>
        {% else %}
            <h2>여러분의 Django 프로젝트에 오신 것을 환영합니다!</h2>
            <p>로그인하시면 회원님께 맞는 동아리 모집 공고를 추천받을 수 있습니다.</p>
        {% endif %}
        <a href="{% url 'login' %}" class="btn btn-primary">
            {% if nickname %}내 프로필 보기{% else %}로그인하고 추천받기{% endif %}
        </a>
    </section>

    <hr>

    <section class="recommendation-area">
        <h3>✨ 회원님을 위한 추천 활동</h3>

        {% if recommended_posts %}
            <div class="recommendation-grid">
                {% for post in recommended_posts %}
                    <div class="post-card">
                        <h4>{{ post.name }}</h4>
                        <p>{{ post.description|truncatechars:100 }}</p>
                        <p><strong>활동 타입:</strong> {{ post.get_type_display }}</p>
                        <div class="post-meta">
                            <span>**모집 분야:** {{ post.recruitment_fields }}</span>
                            <span>**지원 기간:** {{ post.get_application_months_display }}</span>
                            <span>**활동 기간:** {{ post.get_activity_months_display }}</span>
                        </div>
                        <a href="{% url 'posts:posts_detail' post.pk %}" class="btn btn-sm btn-secondary" style="margin-top: 10px;">자세히 보기</a>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            {% if nickname %}
                <p>현재 회원님의 관심사와 일치하는 추천 게시글이 없습니다. 모든 게시글을 탐색해 보세요!</p>
            {% else %}
                <p>로그인하여 맞춤 추천 게시글을 확인해 보세요.</p>
            {% endif %}
        {% endif %}
    </section>

    <hr>

    <section class="feature-grid">
        <div class="feature-card">
            <h3>코드 스타일 통일</h3>
            <p>Pre-commit 훅을 통해 모든 팀원의 코드 스타일을 Black과 isort로 자동 정리합니다.</p>
        </div>
        <div class="feature-card">
            <h3>안정적인 환경</h3>
            <p>가상 환경과 requirements.txt로 모든 개발 환경을 동일하게 유지합니다.</p>
        </div>
        <div class="feature-card">
            <h3>규칙적인 커밋</h3>
            <p>Conventional Commits 규칙을 적용하여 모든 변경 사항을 명확하게 기록합니다.</p>
        </div>
    </section>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/main/main.js' %}"></script>
{% endblock %}
