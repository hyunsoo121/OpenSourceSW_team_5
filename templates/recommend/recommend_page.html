{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/recommend/recommend_page.css' %}">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}
    <div class="mid__row">
        <div class="mid__text">
            <h2>ì‚¬ìš©ì ì¶”ì²œ ê¸°ëŠ¥</h2>
            <p>ì‚¬ìš©ìë¥¼ ìë™ ë¶„ì„í•˜ì—¬ ê°œì¸í™” ì¶”ì²œì„ ì œê³µí•©ë‹ˆë‹¤.</p>
            <!-- <a class="btn tiny" href="#">ì•Œì•„ë³´ê¸°</a> -->
        </div>
        <!-- <figure class="mid__media">
            <img src="{% static 'images/card-1.jpg' %}" alt="ì¶”ì²œ ê¸°ëŠ¥ ì´ë¯¸ì§€">
        </figure> -->
    </div>

<section id="mid-body" class="container mid">

    <!-- ì¶”ì²œ í™œë™ ì„¹ì…˜ -->
    <section class="recommendation-area" id="recommendation-area"
        style="padding: 40px; background: #f8f9fa; margin: 20px 0; border-radius: 8px;">
        <h3>âœ¨ íšŒì›ë‹˜ì„ ìœ„í•œ ì¶”ì²œ í™œë™</h3>

        {% if user.is_authenticated %}
        {% if recommended_posts %}
        <div class="recommendation-grid">
            {% for post in recommended_posts %}
            <div class="post-card"
                style="border: 1px solid #ddd; padding: 20px; margin: 10px 0; border-radius: 8px; background: white;">
                <h4>{{ post.name }}</h4>
                <p>{{ post.description|truncatechars:100 }}</p>
                <p><strong>í™œë™ íƒ€ì…:</strong> {{ post.get_type_display }}</p>
                <div class="post-meta">
                    <span>ëª¨ì§‘ ë¶„ì•¼: {{ post.recruitment_fields }}</span><br>
                    <span>ì§€ì› ê¸°ê°„: {{ post.get_application_months_display }}</span><br>
                    <span>í™œë™ ê¸°ê°„: {{ post.get_activity_months_display }}</span>
                </div>
                <a href="{% url 'posts:posts_detail' post.pk %}" class="btn btn-sm btn-secondary"
                    style="margin-top: 10px;">ìì„¸íˆ ë³´ê¸°</a>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div style="padding: 20px; background: white; border-radius: 8px; text-align: center;">
            <p>í˜„ì¬ íšŒì›ë‹˜ì˜ ê´€ì‹¬ë¶„ì•¼(<strong>{{ user.get_interest_field_display }}</strong>)ì™€ ì¼ì¹˜í•˜ëŠ” ì¶”ì²œ í™œë™ì´ ì—†ìŠµë‹ˆë‹¤.</p>
            <p>ëª¨ë“  ê²Œì‹œê¸€ì„ íƒìƒ‰í•´ ë³´ì„¸ìš”!</p>
        </div>
        {% endif %}
        {% else %}
        <div style="padding: 40px; background: white; border-radius: 8px; text-align: center;">
            <p style="font-size: 18px; margin-bottom: 20px;">ğŸ”’ ë¡œê·¸ì¸í•˜ì—¬ ë§ì¶¤ ì¶”ì²œ í™œë™ì„ í™•ì¸í•´ ë³´ì„¸ìš”!</p>
            <a href="{% url 'login' %}?next={{ request.path }}" class="btn"
                style="background: #333; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px;">ë¡œê·¸ì¸í•˜ê¸°</a>
        </div>
        {% endif %}
    </section>

</section>
{% endblock %}
